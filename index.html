<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>شريط تقدم للأسماء - تحديث مباشر</title>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      direction: rtl;
      padding: 20px;
      background: #f7f7f7;
      text-align: center;
    }
    h1 {
      margin-bottom: 30px;
      color: #333;
    }
    .progress-wrapper {
      margin-bottom: 20px;
      position: relative;
      text-align: left;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }
    .label {
      margin-bottom: 5px;
      font-weight: bold;
      font-size: 18px;
    }
    .progress-container {
      width: 100%;
      background-color: #ddd;
      border-radius: 25px;
      overflow: hidden;
      height: 30px;
      position: relative;
    }
    .progress-bar {
      height: 30px;
      width: 0;
      background-color: #4caf50;
      transition: width 0.05s linear;
    }
    .percent-text {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      line-height: 30px;
      font-weight: bold;
      color: white;
    }
  </style>
</head>
<body>

<h1>🌟 نسبة التقدم 🌟</h1>
<div id="progress-list"></div>

<script>
  const names = [
    { name: "رسول", value: 100 },
    { name: "علي", value: 30 },
    { name: "كاظم", value: 20 },
    { name: "محسن", value: 80 },
    { name: "حسن", value: 90 },
    { name: "حسين", value: 50 },
    { name: "مجتبى", value: 80 },
    { name: "انور", value: 80 },
    { name: "نبراس", value: 80 },
    { name: "هيثم", value: 50 },
    { name: "هاضم", value: 60 },
    { name: "امير", value: 70 },
    { name: "وافي", value: 80 },
    { name: "سيف", value: 100 },
    { name: "موفق", value: 50 },
    { name: "نواف", value: 65 },
    { name: "جابر", value: 75 },
    { name: "محمد", value: 85 },
    { name: "احمد", value: 60 },
    { name: "خالد", value: 70 },
    { name: "حيدر", value: 80 },
    { name: "ياني", value: 50 },
    { name: "كرار", value: 57 },
    { name: "زين", value: 60 },
    { name: "عبدالله", value: 70 },
    { name: "صلاح", value: 80 },
    { name: "اكرم", value: 55 },
    { name: "حيدر جبر", value: 65 },
    { name: "امجد", value: 100 }
  ];

  const list = document.getElementById("progress-list");

  // إنشاء كل شريط
  names.forEach((item, index) => {
    const wrapper = document.createElement("div");
    wrapper.className = "progress-wrapper";

    wrapper.innerHTML = `
      <div class="label">${item.name}</div>
      <div class="progress-container">
        <div class="progress-bar" id="bar${index}"></div>
        <div class="percent-text" id="text${index}">0%</div>
      </div>
    `;
    list.appendChild(wrapper);
  });

  function animateBars() {
    names.forEach((item, index) => {
      const bar = document.getElementById(`bar${index}`);
      const text = document.getElementById(`text${index}`);
      const storageKey = `bar${index}`;

      // استرجاع النسبة المخزنة سابقًا
      let savedValue = parseInt(localStorage.getItem(storageKey)) || 0;
      text.textContent = savedValue + "%";
      bar.style.width = savedValue + "%";

      if (savedValue < item.value) {
        let current = savedValue;
        const stepTime = 50; 
        const increment = 1; 
        const interval = setInterval(() => {
          current += increment;
          if(current > item.value) current = item.value;
          bar.style.width = current + "%";
          text.textContent = current + "%";
          if(current >= item.value) {
            clearInterval(interval);
            localStorage.setItem(storageKey, item.value); // حفظ الحالة لتجنب إعادة الحركة
          }
        }, stepTime);
      }
    });
  }

  animateBars();

  // تحديث تلقائي كل 2 ثانية (يمكن تغييره حسب الحاجة)
  setInterval(() => {
    animateBars();
  }, 2000);

</script>
</body>
</html>
